[
  {
    "nombre": "Listar inicial",
    "panel": "Gestión de Mesas",
    "accion": "Listar mesas",
    "esperado": "Devolver listado de mesas",
    "paso": true,
    "respuesta": {
      "success": true,
      "mesas": [
        {
          "id": 64,
          "numero_mesa": "IT_002",
          "capacidad_minima": 4,
          "capacidad_maxima": 6,
          "precio_reserva": "8.00",
          "ubicacion": "vip",
          "estado": "disponible",
          "descripcion": "Mesa de prueba segunda",
          "fecha_creacion": "2026-01-01 23:32:45",
          "fecha_actualizacion": "2026-01-01 23:32:45"
        },
        {
          "id": 45,
          "numero_mesa": "M01",
          "capacidad_minima": 2,
          "capacidad_maxima": 4,
          "precio_reserva": "6.00",
          "ubicacion": "interior",
          "estado": "disponible",
          "descripcion": null,
          "fecha_creacion": "2026-01-01 22:48:12",
          "fecha_actualizacion": "2026-01-01 22:48:12"
        },
        {
          "id": 46,
          "numero_mesa": "T01",
          "capacidad_minima": 4,
          "capacidad_maxima": 8,
          "precio_reserva": "10.00",
          "ubicacion": "terraza",
          "estado": "disponible",
          "descripcion": null,
          "fecha_creacion": "2026-01-01 22:48:12",
          "fecha_actualizacion": "2026-01-01 22:48:12"
        }
      ]
    }
  },
  {
    "nombre": "Agregar mesa válida A981",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'A981', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': 'Mesa test OK'}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": true,
      "message": "Mesa agregada exitosamente",
      "id": "66"
    }
  },
  {
    "nombre": "Duplicado (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'A981', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": false,
      "message": "El número de mesa ya existe"
    }
  },
  {
    "nombre": "Capacidad 0 (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'B340', 'capacidad_minima': 0, 'capacidad_maxima': 0, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": false,
      "message": "Número de mesa y capacidad máxima son requeridos"
    }
  },
  {
    "nombre": "Capacidad 100 (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'C446', 'capacidad_minima': 1, 'capacidad_maxima': 100, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": false,
    "respuesta": {
      "success": true,
      "message": "Mesa agregada exitosamente",
      "id": "67"
    }
  },
  {
    "nombre": "Ubicación inválida (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'D177', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'patio', 'estado': 'disponible', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": false,
      "message": "SQLSTATE[01000]: Warning: 1265 Data truncated for column 'ubicacion' at row 1"
    }
  },
  {
    "nombre": "Estado inválido (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'E745', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'invalido', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": false,
      "message": "SQLSTATE[01000]: Warning: 1265 Data truncated for column 'estado' at row 1"
    }
  },
  {
    "nombre": "Descripción larga (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'F537', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": false,
    "respuesta": {
      "success": true,
      "message": "Mesa agregada exitosamente",
      "id": "68"
    }
  },
  {
    "nombre": "Descripción XSS (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'G841', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': '<script>alert(1)</script>'}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": false,
    "respuesta": {
      "success": true,
      "message": "Mesa agregada exitosamente",
      "id": "69"
    }
  },
  {
    "nombre": "Editar mesa válida",
    "panel": "Gestión de Mesas",
    "accion": "Editar: {'id': '66', 'numero_mesa': 'A981', 'capacidad_minima': 1, 'capacidad_maxima': 6, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': 'Actualizada'}",
    "esperado": "Actualizar sólo si datos válidos",
    "paso": true,
    "respuesta": {
      "success": true,
      "message": "Mesa actualizada exitosamente"
    }
  },
  {
    "nombre": "Crear base H981",
    "panel": "Gestión de Mesas",
    "accion": "Agregar: {'numero_mesa': 'H981', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': None}",
    "esperado": "Respetar reglas (unicidad, capacidad<=15, estado/ubicación válidos)",
    "paso": true,
    "respuesta": {
      "success": true,
      "message": "Mesa agregada exitosamente",
      "id": "70"
    }
  },
  {
    "nombre": "Editar con duplicado (debe fallar)",
    "panel": "Gestión de Mesas",
    "accion": "Editar: {'id': '70', 'numero_mesa': 'A981', 'capacidad_minima': 1, 'capacidad_maxima': 4, 'ubicacion': 'interior', 'estado': 'disponible', 'descripcion': 'dup'}",
    "esperado": "Actualizar sólo si datos válidos",
    "paso": true,
    "respuesta": {
      "success": false,
      "message": "El número de mesa ya existe en otra mesa"
    }
  },
  {
    "nombre": "Eliminar mesa1",
    "panel": "Gestión de Mesas",
    "accion": "Eliminar id=66",
    "esperado": "Eliminar si no tiene reservas activas",
    "paso": true,
    "respuesta": {
      "success": true,
      "message": "Mesa eliminada exitosamente"
    }
  },
  {
    "nombre": "Eliminar mesa8",
    "panel": "Gestión de Mesas",
    "accion": "Eliminar id=70",
    "esperado": "Eliminar si no tiene reservas activas",
    "paso": true,
    "respuesta": {
      "success": true,
      "message": "Mesa eliminada exitosamente"
    }
  },
  {
    "nombre": "Listar final",
    "panel": "Gestión de Mesas",
    "accion": "Listar mesas",
    "esperado": "Devolver listado de mesas",
    "paso": true,
    "respuesta": {
      "success": true,
      "mesas": [
        {
          "id": 67,
          "numero_mesa": "C446",
          "capacidad_minima": 1,
          "capacidad_maxima": 100,
          "precio_reserva": "15.00",
          "ubicacion": "interior",
          "estado": "disponible",
          "descripcion": null,
          "fecha_creacion": "2026-01-06 22:23:45",
          "fecha_actualizacion": "2026-01-06 22:23:45"
        },
        {
          "id": 68,
          "numero_mesa": "F537",
          "capacidad_minima": 1,
          "capacidad_maxima": 4,
          "precio_reserva": "6.00",
          "ubicacion": "interior",
          "estado": "disponible",
          "descripcion": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
          "fecha_creacion": "2026-01-06 22:23:45",
          "fecha_actualizacion": "2026-01-06 22:23:45"
        },
        {
          "id": 69,
          "numero_mesa": "G841",
          "capacidad_minima": 1,
          "capacidad_maxima": 4,
          "precio_reserva": "6.00",
          "ubicacion": "interior",
          "estado": "disponible",
          "descripcion": "<script>alert(1)</script>",
          "fecha_creacion": "2026-01-06 22:23:45",
          "fecha_actualizacion": "2026-01-06 22:23:45"
        },
        {
          "id": 64,
          "numero_mesa": "IT_002",
          "capacidad_minima": 4,
          "capacidad_maxima": 6,
          "precio_reserva": "8.00",
          "ubicacion": "vip",
          "estado": "disponible",
          "descripcion": "Mesa de prueba segunda",
          "fecha_creacion": "2026-01-01 23:32:45",
          "fecha_actualizacion": "2026-01-01 23:32:45"
        },
        {
          "id": 45,
          "numero_mesa": "M01",
          "capacidad_minima": 2,
          "capacidad_maxima": 4,
          "precio_reserva": "6.00",
          "ubicacion": "interior",
          "estado": "disponible",
          "descripcion": null,
          "fecha_creacion": "2026-01-01 22:48:12",
          "fecha_actualizacion": "2026-01-01 22:48:12"
        },
        {
          "id": 46,
          "numero_mesa": "T01",
          "capacidad_minima": 4,
          "capacidad_maxima": 8,
          "precio_reserva": "10.00",
          "ubicacion": "terraza",
          "estado": "disponible",
          "descripcion": null,
          "fecha_creacion": "2026-01-01 22:48:12",
          "fecha_actualizacion": "2026-01-01 22:48:12"
        }
      ]
    }
  }
]